{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞</title>
    <link rel="stylesheet" href="{% static 'invpage/css/inv.css' %}">
    <link rel="stylesheet" href="{% static 'invpage/css/modal_window.css' %}">
    <link rel="icon" href="{% static 'invpage/img/pushed-brands-solid.svg' %}" type="image/x-icon">
</head>
<body>

<div id="sidebar" class="sidebar">
    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
    {% if request.user.is_superuser %}
        <a href="/admin/">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</a>
        <a href="{% url 'manage_requests' %}">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∞–º–∏</a>
        <a href="{% url 'reports' %}">–û—Ç—á–µ—Ç—ã</a>
    {% else %}
        <a href="{% url 'track_requests' %}">–í–∞—à–∏ –∑–∞—è–≤–∫–∏</a>
        <a href="{% url 'owned_inv' %}">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</a>
        <a href="{% url 'reports' %}">–û—Ç—á–µ—Ç—ã</a>
        <a href="{% url 'about' %}">–û –Ω–∞—Å</a>
    {% endif %}
</div>

<div id="main-content">
    <button class="openbtn" onclick="openNav()">&#9776; –ú–µ–Ω—é</button>
    <h1>–ü—Ä–∏–≤–µ—Ç {{ user_info.username }}üëã, –¥–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É</h1>

    <div class="toggle-section">
        <button class="btnlist" onclick="CButton()">–î–æ—Å—Ç—É–ø–Ω—ã–π –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å</button>
        <ul class="inventory-list good" id="inventory-list-good">
            {% for item in inventory_items %}
                <li>
                    <div class="inventory-card">
                        <h3>{{ item.name }}</h3>
                        <div class="status">
                            –°—Ç–∞—Ç—É—Å:
                            <span class="status-indicator
                                {% if item.status == '–ò—Å–ø—Ä–∞–≤–µ–Ω' %}good{% else %}bad{% endif %}">
                                {{ item.status }}
                            </span>
                        </div>
                        <p>–û–ø–∏—Å–∞–Ω–∏–µ: {{ item.description }}</p>
                        <p>
                            –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:
                            <span class="quantity-indicator
                                {% if item.quantity == 0 %}out-of-stock{% else %}in-stock{% endif %}">
                                {{ item.quantity }}
                            </span>
                        </p>

                        {% if item.quantity > 0 and item.status == '–ò—Å–ø—Ä–∞–≤–µ–Ω' and not request.user.is_superuser %}
                            <button onclick="openModal('{{ item.name }}', '{{ item.quantity }}')" class="request-button">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</button>
                        {% elif item.quantity > 0 and item.status != '–ò—Å–ø—Ä–∞–≤–µ–Ω' and not request.user.is_superuser %}
                            <div class="out-of-stock-message">–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –Ω–µ –∏—Å–ø—Ä–∞–≤–µ–Ω</div>
                        {% elif not request.user.is_superuser %}
                            <div class="out-of-stock-message">–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏</div>
                        {% endif %}
                    </div>
                </li>
            {% empty %}
                <li>–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è.</li>
            {% endfor %}
        </ul>
    </div>

 
    <div id="myModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2>–í–≤–µ–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ</h2>
            <form id="requestForm" method="POST" action="{% url 'index' %}">
                {% csrf_token %}
                <input type="hidden" name="item_name" id="modal-item-name">
                <input type="number" name="quantity" id="modal-quantity" min="1" required>
                <button type="submit" style="margin-top: 20px;">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</button>
            </form>
        </div>
    </div>

</div>

<script src="{% static 'invpage/js/inv.js' %}"></script>
<script src="{% static 'invpage/js/modal_window.js' %}"></script>

</body>
</html>
